<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#2563eb">
    <meta name="zine-version" content="0.15.0"/>
    <title>centos环境搭建</title>
<meta name="description" content="本次搭建遵循以下规则：

安装包从官网下载，尽量选择稳定版本


安装包都放在/usr/local/src目录中


对需要编译的软件，尽量选择安装在/usr/local目录，如/usr/local/nginx, /usr/local/redis。 因为这类软件安装后可执行文件一般都是在/usr/local/bin或/usr/local/sbin, 因此就近原则便于管理


对解压后就可以使用的软">
<meta property="og:type" content="website">
<meta property="og:title" content="centos环境搭建">
<meta property="og:description" content="本次搭建遵循以下规则：

安装包从官网下载，尽量选择稳定版本


安装包都放在/usr/local/src目录中


对需要编译的软件，尽量选择安装在/usr/local目录，如/usr/local/nginx, /usr/local/redis。 因为这类软件安装后可执行文件一般都是在/usr/local/bin或/usr/local/sbin, 因此就近原则便于管理


对解压后就可以使用的软">
<meta name="twitter:title" content="centos环境搭建">
<meta name="twitter:description" content="本次搭建遵循以下规则：

安装包从官网下载，尽量选择稳定版本


安装包都放在/usr/local/src目录中


对需要编译的软件，尽量选择安装在/usr/local目录，如/usr/local/nginx, /usr/local/redis。 因为这类软件安装后可执行文件一般都是在/usr/local/bin或/usr/local/sbin, 因此就近原则便于管理


对解压后就可以使用的软">
<meta property="og:url" content="/knowledge/knowledge/linux/centos_env_setup">
<meta property="twitter:url" content="/knowledge/knowledge/linux/centos_env_setup">
<meta name="twitter:card" content="summary_large_image">
<meta property="og:image" content="/knowledge/knowledge/static/zine-placeholder.svg">
<meta name="twitter:image" content="/knowledge/knowledge/static/zine-placeholder.svg">
<link rel="canonical" href="/knowledge/linux/centos_env_setup">
<link rel="icon" type="image/png" href="/favicon.ico">
    <link rel="stylesheet" href="/knowledge/static/zine.css">
    <link rel="alternate" type="application/atom+xml" title="tcptty RSS" href="/feed.xml">
    <style>
    :root {
        --primary-color: #2563eb;
        --main-color: #ffffff;
        --link-color: #2563eb;
        --secondary-color: #eff3f7;
    }
    </style>
</head>

<body class="h-full bg-secondary">
    <div class="zine-header bg-primary text-main font-bold text-center z-0"
        style="background-image: url('/knowledge/static/img/bg.jpg')">
    <header class="p-8 md:p-10">
            <div class="zine-brand text-4xl lg:text-5xl">
                <a href="/knowledge/">tcptty</a>
            </div>
            <ul class="zine-menu">
                <li class="inline-block mt-6 mx-5 text-base hover:underline">
                    <a href="/knowledge/about">About</a>
                </li>
                <li class="inline-block mt-6 mx-5 text-base hover:underline">
                    <a href="/knowledge/blog">Blog</a>
                </li>
                </ul>
        </header>
        <div class="zine-space w-full h-32 md:h-36 lg:h-44 xl:h-48 2xl:h-56"></div>
    </div>
    <main
        class="pb-10 -translate-y-32 lg:-translate-y-36 xl:-translate-y-44 2xl:-translate-y-56 mx-auto sm:max-w-scree-md md:max-w-screen-lg">
        <div class="px-4 pb-10 md:px-8 md:pb-14 mx-4 my-6 bg-white shadow-xl shadow-slate-700/10 ring-1 ring-gray-900/5">
    <div
        class="sticky z-10 py-4 top-32 lg:top-36 xl:top-44 2xl:top-56 bg-white border-dashed border-b border-slate-300">
        <div class="ml-1 md:ml-2 flex justify-between items-center">
            <div class="zine-breadcrumb">
                <a class="zine-diamond before:block before:absolute before:-inset-1 before:-skew-x-6 before:bg-primary relative inline-block transition sm:hover:scale-110 duration-500" href="/knowledge/linux">
                    <div class="relative text-main px-4">Linux 常用命令</div>
                </a>
                <span class="ml-2 text-gray-700">/ No. ⁨2⁩</span>
            </div>
            <div>
                <div class="flex items-center">
                    <div id="toc-menu" class="ml-1 md:ml-2 p-2 cursor-pointer rounded hover:bg-gray-200">
                       <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true">
                            <path fill-rule="evenodd"
                                d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z">
                            </path>
                        </svg>
                    </div>
                    </div>
                <div id="toc-list"
                    class="absolute hidden right-0 flex flex-col max-w-screen-sm max-h-96 w-60 py-2 my-4 border bg-white rounded z-[99999] shadow-xl">
                    <div class="px-2 overflow-y-auto">
                        <a href="#准备">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-2 text-gray-800 font-bold text-sm">准备</div>
                            </a>
                        <a href="#更新系统">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-2 text-gray-800 font-bold text-sm">更新系统</div>
                            </a>
                        <a href="#安装nginx">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-2 text-gray-800 font-bold text-sm">安装nginx</div>
                            </a>
                        <a href="#安装gcc">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">安装gcc</div>
                            </a>
                        <a href="#解压nginx及其依赖模块">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">解压nginx及其依赖模块</div>
                            </a>
                        <a href="#编译与安装">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">编译与安装</div>
                            </a>
                        <a href="#添加软连接">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">添加软连接</div>
                            </a>
                        <a href="#安装redis">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-2 text-gray-800 font-bold text-sm">安装redis</div>
                            </a>
                        <a href="#安装gcc">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">安装gcc</div>
                            </a>
                        <a href="#解压">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">解压</div>
                            </a>
                        <a href="#编译">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">编译</div>
                            </a>
                        <a href="#安装及初始化配置">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">安装及初始化配置</div>
                            </a>
                        <a href="#修改绑定ip">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">修改绑定IP</div>
                            </a>
                        <a href="#设置密码">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-2 text-gray-800 font-bold text-sm">设置密码</div>
                            </a>
                        <a href="#启动与停止">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">启动与停止</div>
                            </a>
                        <a href="#安装java">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-2 text-gray-800 font-bold text-sm">安装java</div>
                            </a>
                        <a href="#卸载系统自带的openjdk">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">卸载系统自带的openjdk</div>
                            </a>
                        <a href="#解压">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">解压</div>
                            </a>
                        <a href="#设置环境变量">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">设置环境变量</div>
                            </a>
                        <a href="#修改jce">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">修改JCE</div>
                            </a>
                        <a href="#安装zookeeper">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-2 text-gray-800 font-bold text-sm">安装zookeeper</div>
                            </a>
                        <a href="#解压">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">解压</div>
                            </a>
                        <a href="#添加配置文件zoo.cfg">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">添加配置文件zoo.cfg</div>
                            </a>
                        <a href="#修改数据存储路径">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">修改数据存储路径</div>
                            </a>
                        <a href="#启动/停止/重启">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">启动/停止/重启</div>
                            </a>
                        <a href="#客户端连接">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">客户端连接</div>
                            </a>
                        <a href="#防火墙iptables修改">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-2 text-gray-800 font-bold text-sm">防火墙iptables修改</div>
                            </a>
                        <a href="#配置文件路径">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">配置文件路径</div>
                            </a>
                        <a href="#添加常用端口控制">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">添加常用端口控制</div>
                            </a>
                        <a href="#常用命令">
                            <div class="py-1 my-1 rounded hover:bg-gray-100 pl-4 text-gray-700 text-sm">常用命令</div>
                            </a>
                        </div>
                </div>
                </div>
        </div>
    </div>
    <div class="pt-10">
        <div class="prose mx-auto">
            <div class="zine-article-title text-2xl md:text-4xl font-extrabold leading-tight mb-8 text-center">
                centos环境搭建
            </div>
            <div class="flex items-center justify-between text-gray-500">
                <span>2018-04-14</span>
                <div class="flex items-center">
    <span></span>
    </div>

            </div>
            </div>
        <article class="prose mx-auto my-12">
            <h2 id="准备" class="toc-item group scroll-mt-20">
    准备
    <a href="#准备" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h2>
<p>本次搭建遵循以下规则：</p>
<ul>
<li>安装包从官网下载，尽量选择稳定版本</li>
<li>安装包都放在/usr/local/src目录中</li>
<li>对需要编译的软件，尽量选择安装在<code>/usr/local</code>目录，如<code>/usr/local/nginx</code>, <code>/usr/local/redis</code>。 因为这类软件安装后可执行文件一般都是在<code>/usr/local/bin</code>或<code>/usr/local/sbin</code>, 因此就近原则便于管理</li>
<li>对解压后就可以使用的软件，一般就放在<code>/opt</code>目录下，如jdk, zookeeper</li>
</ul>
<p>nginx及需要用到模块的源码，如下</p>
<ul>
<li><a href="https://nginx.org/en/download.html">nginx</a>, 目前用的1.12.x版本。</li>
<li><a href="https://www.openssl.org/source/">openssl</a>, 让ngnix支持ssl(https)功能。一般linux有自带(版本很老)，但nginx在编译时可能找不到，所以最好还是下载一份，目前用的1.1.x并带有小写字母的稳定版本。</li>
<li><a href="https://www.pcre.org/">pcre</a>, 让ngnix支持rewrite功能。目前用的8.x版本，最新版本编译不过。</li>
<li><a href="https://zlib.net/">zlib</a>，让ngnix支持gzip功能. 目前用的1.2.x版本。</li>
<li><a href="https://github.com/openresty/echo-nginx-module/releases">echo</a>, 让ngnix支持echo输出字符的功能, 对于调试很方便. 目前用的版本是0.61。</li>
<li><a href="https://github.com/nbs-system/naxsi/releases">naxsi</a>, 让ngnix支持WAF防火墙,主要是防御XSS和SQL注入的功能. 目前用的0.55.x版本。</li>
</ul>
<p>java，目前选择的是Oracle的jdk8(8是长期维护版LTS)，新版本还有9和10</p>
<ul>
<li><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">jdk8</a></li>
<li><a href="http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html">jce8</a>, 这个用于AES加解密长度限制问题。</li>
</ul>
<p>redis，目前选择的是 3.2.x，最新版是4.x.x</p>
<ul>
<li><a href="https://redis.io/download">redis</a></li>
</ul>
<p>zookeeper, 目前用的3.4.x</p>
<ul>
<li><a href="https://zookeeper.apache.org/releases.html">zookeeper</a></li>
</ul>
<h2 id="更新系统" class="toc-item group scroll-mt-20">
    更新系统
    <a href="#更新系统" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h2><pre style="background-color:#272822;">
<span style="color:#f8f8f2;">yum update
</span></pre>
<p>如果发现更新源地址不可用，去 /etc/yum.repo.d目下修改源的配置(或自己新建一个xxx.repo文件)，再执行。</p>
<pre style="background-color:#272822;">
<span style="color:#f8f8f2;">[base]
</span><span style="color:#f8f8f2;">name=CentOS-$releasever - Base
</span><span style="color:#f8f8f2;">baseurl=http://10.10.10.1/centos/$releasever/os/$basearch/
</span><span style="color:#f8f8f2;">enable=1
</span><span style="color:#f8f8f2;">gpgcheck=0
</span><span style="color:#f8f8f2;">gpgkey=http://10.10.10.1/centos/RPM-GPG-KEY-CentOS-6
</span><span style="color:#f8f8f2;">
</span><span style="color:#f8f8f2;">[updates]
</span><span style="color:#f8f8f2;">name=CentOS-$releasever - Updates
</span><span style="color:#f8f8f2;">baseurl=http://10.10.10.1/centos/$releasever/updates/$basearch/
</span><span style="color:#f8f8f2;">enable=1
</span><span style="color:#f8f8f2;">gpgcheck=0
</span><span style="color:#f8f8f2;">gpgkey=http://10.10.10.1/centos/RPM-GPG-KEY-CentOS-6
</span><span style="color:#f8f8f2;">
</span><span style="color:#f8f8f2;">[extras]
</span><span style="color:#f8f8f2;">name=CentOS-$releasever - Extras
</span><span style="color:#f8f8f2;">baseurl=http://10.10.10.1/centos/$releasever/extras/$basearch/
</span><span style="color:#f8f8f2;">enable=1
</span><span style="color:#f8f8f2;">gpgcheck=0
</span><span style="color:#f8f8f2;">gpgkey=http://10.10.10.1/centos/RPM-GPG-KEY-CentOS-6
</span><span style="color:#f8f8f2;">
</span></pre>
<p>更新完成后，查看下系统及内核版本</p>
<pre style="background-color:#272822;">
<span style="color:#f8f8f2;">lab_release</span><span style="font-style:italic;color:#fd971f;"> -a
</span><span style="color:#f8f8f2;">
</span><span style="color:#f8f8f2;">LSB Version:	:base-4.0-amd64:base-4.0-noarch:core-4.0-amd64:core-4.0-noarch:graphics-4.0-amd64:graphics-4.0-noarch:printing-4.0-amd64:printing-4.0-noarch
</span><span style="color:#f8f8f2;">Distributor ID:	CentOS
</span><span style="color:#f8f8f2;">Description:	CentOS release 6.9 (Final)
</span><span style="color:#f8f8f2;">Release:	6.9
</span><span style="color:#f8f8f2;">Codename:	Final
</span><span style="color:#f8f8f2;">
</span><span style="color:#f8f8f2;">uname</span><span style="font-style:italic;color:#fd971f;"> -a
</span><span style="color:#f8f8f2;">
</span><span style="color:#f8f8f2;">Linux localhost 2.6.32-642.el6.x86_64 </span><span style="color:#75715e;">#1 SMP Tue May 10 17:27:01 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux
</span><span style="color:#f8f8f2;">
</span></pre>
<h2 id="安装nginx" class="toc-item group scroll-mt-20">
    安装nginx
    <a href="#安装nginx" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h2><h3 id="安装gcc" class="toc-item group scroll-mt-20">
    安装gcc
    <a href="#安装gcc" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#f8f8f2;">yum install gcc gcc-c++
</span></pre>
<h3 id="解压nginx及其依赖模块" class="toc-item group scroll-mt-20">
    解压nginx及其依赖模块
    <a href="#解压nginx及其依赖模块" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#66d9ef;">cd</span><span style="color:#f8f8f2;"> /usr/local/src
</span><span style="color:#f8f8f2;">tar zxvf nginx-1.12.2.tar.gz
</span><span style="color:#f8f8f2;">tar zxvf pcre-8.40.tar.gz
</span><span style="color:#f8f8f2;">tar zxvf zlib-1.2.11.tar.gz
</span><span style="color:#f8f8f2;">tar zxvf echo-nginx-module-0.61.tar.gz
</span><span style="color:#f8f8f2;">tar zxvf naxsi-0.55.3.tar.gz
</span><span style="color:#f8f8f2;">
</span></pre>
<h3 id="编译与安装" class="toc-item group scroll-mt-20">
    编译与安装
    <a href="#编译与安装" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#66d9ef;">cd</span><span style="color:#f8f8f2;"> nginx-1.12.2
</span><span style="color:#f8f8f2;">./configure \
</span><span style="font-style:italic;color:#fd971f;">--add-module</span><span style="color:#f92672;">=</span><span style="color:#f8f8f2;">../naxsi-0.55.3/naxsi_src \
</span><span style="font-style:italic;color:#fd971f;">--add-module</span><span style="color:#f92672;">=</span><span style="color:#f8f8f2;">../echo-nginx-module-0.61 \
</span><span style="font-style:italic;color:#fd971f;">--with-openssl</span><span style="color:#f92672;">=</span><span style="color:#f8f8f2;">../openssl-1.1.0g \
</span><span style="font-style:italic;color:#fd971f;">--with-pcre</span><span style="color:#f92672;">=</span><span style="color:#f8f8f2;">../pcre-8.40 \
</span><span style="font-style:italic;color:#fd971f;">--with-pcre-jit </span><span style="color:#f8f8f2;">\
</span><span style="font-style:italic;color:#fd971f;">--with-zlib</span><span style="color:#f92672;">=</span><span style="color:#f8f8f2;">../zlib-1.2.11 \
</span><span style="font-style:italic;color:#fd971f;">--with-http_realip_module </span><span style="color:#f8f8f2;">\
</span><span style="font-style:italic;color:#fd971f;">--with-http_stub_status_module </span><span style="color:#f8f8f2;">\
</span><span style="font-style:italic;color:#fd971f;">--with-http_ssl_module </span><span style="color:#f8f8f2;">\
</span><span style="font-style:italic;color:#fd971f;">--with-http_sub_module </span><span style="color:#f8f8f2;">\
</span><span style="font-style:italic;color:#fd971f;">--with-http_gzip_static_module </span><span style="color:#f8f8f2;">\
</span><span style="font-style:italic;color:#fd971f;">--with-http_gunzip_module </span><span style="color:#f8f8f2;">\
</span><span style="font-style:italic;color:#fd971f;">--with-stream </span><span style="color:#f8f8f2;">\
</span><span style="color:#f8f8f2;">
</span></pre>
<p>执行configure后的输出结果</p>
<pre style="background-color:#272822;">
<span style="color:#f8f8f2;">Configuration summary
</span><span style="color:#f8f8f2;">  + using PCRE library: ../pcre-8.40
</span><span style="color:#f8f8f2;">  + using OpenSSL library: ../openssl-1.1.0g
</span><span style="color:#f8f8f2;">  + using zlib library: ../zlib-1.2.11
</span><span style="color:#f8f8f2;">
</span><span style="color:#f8f8f2;">  nginx path prefix: &quot;/usr/local/nginx&quot;
</span><span style="color:#f8f8f2;">  nginx binary file: &quot;/usr/local/nginx/sbin/nginx&quot;
</span><span style="color:#f8f8f2;">  nginx modules path: &quot;/usr/local/nginx/modules&quot;
</span><span style="color:#f8f8f2;">  nginx configuration prefix: &quot;/usr/local/nginx/conf&quot;
</span><span style="color:#f8f8f2;">  nginx configuration file: &quot;/usr/local/nginx/conf/nginx.conf&quot;
</span><span style="color:#f8f8f2;">  nginx pid file: &quot;/usr/local/nginx/logs/nginx.pid&quot;
</span><span style="color:#f8f8f2;">  nginx error log file: &quot;/usr/local/nginx/logs/error.log&quot;
</span><span style="color:#f8f8f2;">  nginx http access log file: &quot;/usr/local/nginx/logs/access.log&quot;
</span><span style="color:#f8f8f2;">  nginx http client request body temporary files: &quot;client_body_temp&quot;
</span><span style="color:#f8f8f2;">  nginx http proxy temporary files: &quot;proxy_temp&quot;
</span><span style="color:#f8f8f2;">  nginx http fastcgi temporary files: &quot;fastcgi_temp&quot;
</span><span style="color:#f8f8f2;">  nginx http uwsgi temporary files: &quot;uwsgi_temp&quot;
</span><span style="color:#f8f8f2;">  nginx http scgi temporary files: “scgi_temp&quot;
</span></pre>
<p>确认没什么问题后开始make, 如果看到“Error”, 说明安装失败</p>
<pre style="background-color:#272822;">
<span style="color:#f8f8f2;">make </span><span style="color:#f92672;">&amp;&amp; </span><span style="color:#f8f8f2;">make install
</span></pre>
<p>查看下/usr/local/nginx目录，<code>sslkey</code>目录是我自己创建的，用于存放ssl证书</p>
<pre style="background-color:#272822;">
<span style="color:#f8f8f2;">ll /usr/local/nginx
</span><span style="color:#f8f8f2;">
</span><span style="color:#f8f8f2;">总用量 40
</span><span style="color:#f8f8f2;">drwx------ 2 nobody root 4096 3月  27 10:39 client_body_temp
</span><span style="color:#f8f8f2;">drwxr-xr-x 2 root   root 4096 3月  28 17:50 conf
</span><span style="color:#f8f8f2;">drwx------ 2 nobody root 4096 3月  23 14:46 fastcgi_temp
</span><span style="color:#f8f8f2;">drwxr-xr-x 2 root   root 4096 3月  23 14:43 html
</span><span style="color:#f8f8f2;">drwxr-xr-x 2 root   root 4096 3月  26 18:58 logs
</span><span style="color:#f8f8f2;">drwx------ 2 nobody root 4096 3月  23 14:46 proxy_temp
</span><span style="color:#f8f8f2;">drwxr-xr-x 2 root   root 4096 3月  23 14:43 sbin
</span><span style="color:#f8f8f2;">drwx------ 2 nobody root 4096 3月  23 14:46 scgi_temp
</span><span style="color:#f8f8f2;">drwxr-xr-x 2 root   root 4096 3月  26 14:45 sslkey
</span><span style="color:#f8f8f2;">drwx------ 2 nobody root 4096 3月  23 14:46 uwsgi_temp
</span><span style="color:#f8f8f2;">
</span></pre>
<h3 id="添加软连接" class="toc-item group scroll-mt-20">
    添加软连接
    <a href="#添加软连接" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3>
<p>如果你指定了<code>--sbin-path</code>，这步可选。</p>
<p>由于configure时没有指定<code>--sbin-path</code>, 因此nginx可执行文件默认路径为<code>prefix/sbin/nginx</code>，即<code>/usr/local/nginx/sbin/nginx</code>。因此为了便于使用，给nginx可执行文件加个软连接，这样就不必用全路径来使用nginx命令。</p>
<pre style="background-color:#272822;">
<span style="color:#f8f8f2;">ln -s /usr/local/nginx/sbin/nginx /usr/local/sbin/nginx
</span></pre>
<h2 id="安装redis" class="toc-item group scroll-mt-20">
    安装redis
    <a href="#安装redis" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h2><h3 id="安装gcc" class="toc-item group scroll-mt-20">
    安装gcc
    <a href="#安装gcc" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#f8f8f2;">yum install gcc
</span></pre>
<h3 id="解压" class="toc-item group scroll-mt-20">
    解压
    <a href="#解压" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#66d9ef;">cd</span><span style="color:#f8f8f2;"> /usr/local/src
</span><span style="color:#f8f8f2;">tar zxvf redis-3.2.11.tar.gz
</span></pre>
<h3 id="编译" class="toc-item group scroll-mt-20">
    编译
    <a href="#编译" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#66d9ef;">cd</span><span style="color:#f8f8f2;"> redis-3.2.11
</span><span style="color:#f8f8f2;">make MALLOC=libc </span><span style="color:#75715e;"># 如果已安装jemalloc，直接执行make
</span><span style="color:#f8f8f2;">make install
</span></pre>
<p>这里注意<code>make</code>时指定了<code>MALLOC</code>参数，因为redis默认的内存管理策略是<code>jemalloc</code>, 如果没有装这个，请改成<code>libc</code>.</p>
<h3 id="安装及初始化配置" class="toc-item group scroll-mt-20">
    安装及初始化配置
    <a href="#安装及初始化配置" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#66d9ef;">cd</span><span style="color:#f8f8f2;"> utils </span><span style="color:#75715e;"># 进入redis源码中的utils目录
</span><span style="color:#f8f8f2;">./install_server.sh </span><span style="color:#75715e;">#执行后会有交互性提示，让你选择路径配置文件路径及端口等，如下
</span><span style="color:#f8f8f2;">
</span><span style="color:#f8f8f2;">This script will help you easily set up a running redis server
</span><span style="color:#f8f8f2;">
</span><span style="color:#f8f8f2;">Please select the redis port for this instance: </span><span style="color:#f92672;">[</span><span style="color:#f8f8f2;">6379</span><span style="color:#f92672;">]
</span><span style="color:#f8f8f2;">Selecting default: 6379
</span><span style="color:#f8f8f2;">Please select the redis config file name </span><span style="color:#f92672;">[</span><span style="color:#f8f8f2;">/etc/redis/6379.conf</span><span style="color:#f92672;">]</span><span style="color:#f8f8f2;"> /usr/local/redis/6379.conf
</span><span style="color:#f8f8f2;">Please select the redis log file name </span><span style="color:#f92672;">[</span><span style="color:#f8f8f2;">/var/log/redis_6379.log</span><span style="color:#f92672;">]</span><span style="color:#f8f8f2;"> /usr/local/redis/log/6379.log
</span><span style="color:#f8f8f2;">Please select the data directory for this instance </span><span style="color:#f92672;">[</span><span style="color:#f8f8f2;">/var/lib/redis/6379</span><span style="color:#f92672;">]</span><span style="color:#f8f8f2;"> /usr/local/redis/db/6379
</span><span style="color:#f8f8f2;">Please select the redis executable path </span><span style="color:#f92672;">[</span><span style="color:#f8f8f2;">/usr/local/bin/redis</span><span style="color:#f92672;">-</span><span style="color:#f8f8f2;">server</span><span style="color:#f92672;">]
</span><span style="color:#f8f8f2;">Selected config:
</span><span style="color:#f8f8f2;">Port           : 6379
</span><span style="color:#f8f8f2;">Config file    : /usr/local/redis/6379.conf
</span><span style="color:#f8f8f2;">Log file       : /usr/local/redis/log/6379.log
</span><span style="color:#f8f8f2;">Data dir       : /usr/local/redis/db/6379
</span><span style="color:#f8f8f2;">Executable     : /usr/local/bin/redis-server
</span><span style="color:#f8f8f2;">Cli Executable : /usr/local/bin/redis-cli
</span><span style="color:#f8f8f2;">
</span></pre>
<p>查看下redis的安装目录</p>
<pre style="background-color:#272822;">
<span style="color:#f8f8f2;">ll /usr/local/redis/
</span><span style="color:#f8f8f2;">总用量 12
</span><span style="color:#f8f8f2;">drwxr-xr-x 2 root root 4096 3月  26 14:37 conf
</span><span style="color:#f8f8f2;">drwxr-xr-x 3 root root 4096 3月  23 16:19 db
</span><span style="color:#f8f8f2;">drwxr-xr-x 2 root root 4096 3月  23 16:19 log
</span></pre>
<h3 id="修改绑定ip" class="toc-item group scroll-mt-20">
    修改绑定IP
    <a href="#修改绑定ip" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3>
<p><code>注：这步可以与下面的‘设置密码’一起操作，都是同一个配置文件</code></p>
<p>redis默认只会绑定本机127.0.0.1, 这样的话，访问redis服务只能通过本机的客户端连接，而无法通过远程连接，这样可以避免将redis服务暴露于危险的网络环境中，防止一些不安全的人随随便便通过远程连接到redis服务.</p>
<p>为了远程连接，把服务器的真实IP追加到bind中，假设ip为192.168.20.200, 操作如下</p>
<pre style="background-color:#272822;">
<span style="color:#75715e;"># 编辑配置文件
</span><span style="color:#f8f8f2;">vi /usr/local/redis/conf/6379.conf 
</span><span style="color:#f8f8f2;">
</span><span style="color:#75715e;"># 查找bind的配置，如下
</span><span style="color:#f8f8f2;">
</span><span style="color:#75715e;">################################## NETWORK #####################################
</span><span style="color:#f8f8f2;">
</span><span style="color:#75715e;"># By default, if no &quot;bind&quot; configuration directive is specified, Redis listens
</span><span style="color:#75715e;"># for connections from all the network interfaces available on the server.
</span><span style="color:#75715e;"># It is possible to listen to just one or multiple selected interfaces using
</span><span style="color:#75715e;"># the &quot;bind&quot; configuration directive, followed by one or more IP addresses.
</span><span style="color:#75715e;">#
</span><span style="color:#75715e;"># Examples:
</span><span style="color:#75715e;">#
</span><span style="color:#75715e;"># bind 192.168.1.100 10.0.0.1
</span><span style="color:#75715e;"># bind 127.0.0.1 ::1
</span><span style="color:#75715e;">#
</span><span style="color:#75715e;"># ~~~ WARNING ~~~ If the computer running Redis is directly exposed to the
</span><span style="color:#75715e;"># internet, binding to all the interfaces is dangerous and will expose the
</span><span style="color:#75715e;"># instance to everybody on the internet. So by default we uncomment the
</span><span style="color:#75715e;"># following bind directive, that will force Redis to listen only into
</span><span style="color:#75715e;"># the IPv4 lookback interface address (this means Redis will be able to
</span><span style="color:#75715e;"># accept connections only from clients running into the same computer it
</span><span style="color:#75715e;"># is running).
</span><span style="color:#75715e;">#
</span><span style="color:#75715e;"># IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES
</span><span style="color:#75715e;"># JUST COMMENT THE FOLLOWING LINE.
</span><span style="color:#75715e;"># ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</span><span style="color:#66d9ef;">bind</span><span style="color:#f8f8f2;"> 127.0.0.1 192.168.20.200
</span><span style="color:#f8f8f2;">
</span></pre>
<h2 id="设置密码" class="toc-item group scroll-mt-20">
    设置密码
    <a href="#设置密码" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h2>
<p>redis默认情况下，客户端连接是不需要密码的，只要ip和端口正确就可以连接。安全考虑，需设置一个密码，假设为123456，如下</p>
<pre style="background-color:#272822;">
<span style="color:#75715e;"># 编辑配置文件
</span><span style="color:#f8f8f2;">vi /usr/local/redis/conf/6379.conf 
</span><span style="color:#f8f8f2;">
</span><span style="color:#75715e;"># 查找requirepass的配置，
</span><span style="color:#f8f8f2;">
</span><span style="color:#f8f8f2;">
</span><span style="color:#75715e;">################################## SECURITY ###################################
</span><span style="color:#f8f8f2;">
</span><span style="color:#75715e;"># Require clients to issue AUTH &lt;PASSWORD&gt; before processing any other
</span><span style="color:#75715e;"># commands.  This might be useful in environments in which you do not trust
</span><span style="color:#75715e;"># others with access to the host running redis-server.
</span><span style="color:#75715e;">#
</span><span style="color:#75715e;"># This should stay commented out for backward compatibility and because most
</span><span style="color:#75715e;"># people do not need auth (e.g. they run their own servers).
</span><span style="color:#75715e;">#
</span><span style="color:#75715e;"># Warning: since Redis is pretty fast an outside user can try up to
</span><span style="color:#75715e;"># 150k passwords per second against a good box. This means that you should
</span><span style="color:#75715e;"># use a very strong password otherwise it will be very easy to break.
</span><span style="color:#75715e;">#
</span><span style="color:#f8f8f2;">requirepass 123456
</span><span style="color:#f8f8f2;">
</span><span style="color:#75715e;"># Command renaming.
</span><span style="color:#f8f8f2;">
</span></pre>
<h3 id="启动与停止" class="toc-item group scroll-mt-20">
    启动与停止
    <a href="#启动与停止" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3>
<p>redis的可执行文件默认是在<code>/usr/local/bin</code>中，因此可以直接使用</p>
<pre style="background-color:#272822;">
<span style="color:#75715e;"># 启动
</span><span style="color:#f8f8f2;">redis-server /usr/local/redis/conf/6379.conf
</span><span style="color:#f8f8f2;">
</span><span style="color:#75715e;"># 停止
</span><span style="color:#f8f8f2;">redis-cli shutdown 
</span><span style="color:#75715e;"># 或直接kill
</span><span style="color:#66d9ef;">kill</span><span style="color:#f8f8f2;"> -9 redis的pid
</span></pre>
<h2 id="安装java" class="toc-item group scroll-mt-20">
    安装java
    <a href="#安装java" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h2><h3 id="卸载系统自带的openjdk" class="toc-item group scroll-mt-20">
    卸载系统自带的openjdk
    <a href="#卸载系统自带的openjdk" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#75715e;"># 看下系统自带的java版本
</span><span style="color:#f8f8f2;">java</span><span style="font-style:italic;color:#fd971f;"> -version
</span><span style="color:#75715e;"># 输出如下
</span><span style="color:#f8f8f2;">openjdk version </span><span style="color:#e6db74;">&quot;1.8.0_161&quot;
</span><span style="color:#f8f8f2;">OpenJDK Runtime Environment (build 1.8.0_161-b14)
</span><span style="color:#f8f8f2;">OpenJDK 64-Bit Server VM (build 25.161-b14, mixed mode)
</span><span style="color:#75715e;"># 查看系统自带的java路径
</span><span style="color:#f8f8f2;">rpm</span><span style="font-style:italic;color:#fd971f;"> -qa </span><span style="color:#f92672;">| </span><span style="color:#f8f8f2;">grep java
</span><span style="color:#75715e;"># 输出如下
</span><span style="color:#f8f8f2;">java-1.6.0-openjdk-1.6.0.41-1.13.13.1.el6_8.x86_64
</span><span style="color:#f8f8f2;">tzdata-java-2018c-1.el6.noarch
</span><span style="color:#f8f8f2;">java-1.7.0-openjdk-1.7.0.171-2.6.13.0.el6_9.x86_64
</span><span style="color:#75715e;"># java开头的openjdk都卸载
</span><span style="color:#f8f8f2;">yum</span><span style="font-style:italic;color:#fd971f;"> -y</span><span style="color:#f8f8f2;"> remove java-1.6.0-openjdk-1.6.0.41-1.13.13.1.el6_8.x86_64
</span><span style="color:#f8f8f2;">yum</span><span style="font-style:italic;color:#fd971f;"> -y</span><span style="color:#f8f8f2;"> remove java-1.7.0-openjdk-1.7.0.171-2.6.13.0.el6_9.x86_64
</span></pre>
<h3 id="解压" class="toc-item group scroll-mt-20">
    解压
    <a href="#解压" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#75715e;"># 解压到/opt目录
</span><span style="color:#f8f8f2;">tar zxvf jdk-8u131-linux-x64.tar.gz</span><span style="font-style:italic;color:#fd971f;"> -C</span><span style="color:#f8f8f2;"> /opt
</span></pre>
<h3 id="设置环境变量" class="toc-item group scroll-mt-20">
    设置环境变量
    <a href="#设置环境变量" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#75715e;">#编辑当前用户主目录下的`.bash_profile`文件
</span><span style="color:#f8f8f2;">vi ~/.bash_profile
</span></pre>
<p>修改后如下, 没加<code>CLASS_PATH</code>,有需要自己添加下</p>
<pre style="background-color:#272822;">
<span style="color:#75715e;"># .bash_profile
</span><span style="color:#f8f8f2;">
</span><span style="color:#75715e;"># Get the aliases and functions
</span><span style="color:#f92672;">if </span><span style="color:#66d9ef;">[ </span><span style="font-style:italic;color:#fd971f;">-f </span><span style="color:#f8f8f2;">~/.bashrc </span><span style="color:#66d9ef;">]</span><span style="color:#f92672;">; then
</span><span style="color:#f8f8f2;">	</span><span style="color:#66d9ef;">. </span><span style="color:#f8f8f2;">~/.bashrc
</span><span style="color:#f92672;">fi
</span><span style="color:#f8f8f2;">
</span><span style="color:#75715e;"># User specific environment and startup programs
</span><span style="color:#f8f8f2;">
</span><span style="color:#f8f8f2;">PATH</span><span style="color:#f92672;">=</span><span style="color:#e6db74;">$PATH:$HOME/bin
</span><span style="color:#f8f8f2;">
</span><span style="color:#f92672;">export </span><span style="color:#f8f8f2;">JAVA_HOME</span><span style="color:#f92672;">=</span><span style="color:#e6db74;">/opt/jdk1.8.0_131
</span><span style="color:#f8f8f2;">
</span><span style="color:#f92672;">export </span><span style="color:#f8f8f2;">PATH</span><span style="color:#f92672;">=</span><span style="color:#e6db74;">&quot;$PATH:$JAVA_HOME/bin/&quot;
</span><span style="color:#f8f8f2;">
</span></pre>
<p>重新加载<code>.bash_profile</code></p>
<pre style="background-color:#272822;">
<span style="color:#66d9ef;">source </span><span style="color:#f8f8f2;">~/.bash_profile
</span></pre>
<p>查看当前java版本及路径</p>
<pre style="background-color:#272822;">
<span style="color:#f8f8f2;">java</span><span style="font-style:italic;color:#fd971f;"> -version
</span><span style="color:#75715e;"># 输出如下
</span><span style="color:#f8f8f2;">java version </span><span style="color:#e6db74;">&quot;1.8.0_131&quot;
</span><span style="color:#f8f8f2;">Java(TM) SE Runtime Environment (build 1.8.0_131-b11)
</span><span style="color:#f8f8f2;">Java HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)
</span><span style="color:#f8f8f2;">
</span><span style="color:#f8f8f2;">which java
</span><span style="color:#75715e;"># 输出如下
</span><span style="color:#f8f8f2;">/opt/jdk1.8.0_131/bin/java
</span><span style="color:#f8f8f2;">
</span></pre>
<h3 id="修改jce" class="toc-item group scroll-mt-20">
    修改JCE
    <a href="#修改jce" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3>
<p>因为某些国家的进口管制限制，Java发布的运行环境包中的加解密有一定的限制。比如默认不允许256位密钥的AES加解密，解决方法就是修改策略文件。</p>
<p>解压,可以看到local_policy.jar和US_export_policy.jar以及readme.txt。 </p>
<ul>
<li>
<p>如果安装了JRE，将两个jar文件放到%JRE_HOME%\lib\security下覆盖原来文件，记得先备份。 </p>
</li>
<li>
<p>如果安装了JDK，将两个jar文件也放到%JAVA_HOME%\jre\lib\security下</p>
</li>
</ul>
<h2 id="安装zookeeper" class="toc-item group scroll-mt-20">
    安装zookeeper
    <a href="#安装zookeeper" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h2>
<p><code>安装之前，先先确保java命令可用，因为zookeeper依赖java.</code></p>
<p>如果zookeeper单独安装在一台服务器上，为了方便，我直接用系统自带的openjdk，没用oracle jdk。</p>
<h3 id="解压" class="toc-item group scroll-mt-20">
    解压
    <a href="#解压" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#75715e;"># 解压到/opt
</span><span style="color:#f8f8f2;">tar zxvf zookeeper-3.4.10.tar.gz</span><span style="font-style:italic;color:#fd971f;"> -C</span><span style="color:#f8f8f2;"> /opt
</span></pre>
<h3 id="添加配置文件zoo.cfg" class="toc-item group scroll-mt-20">
    添加配置文件zoo.cfg
    <a href="#添加配置文件zoo.cfg" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#66d9ef;">cd</span><span style="color:#f8f8f2;"> /opt/zookeeper-3.4.10/conf
</span><span style="color:#75715e;"># 从示例文件复制
</span><span style="color:#f8f8f2;">cp zoo_sample.cfg zoo.cfg
</span><span style="color:#75715e;"># 修改配置
</span><span style="color:#f8f8f2;">vi zoo.cfg
</span></pre>
<h3 id="修改数据存储路径" class="toc-item group scroll-mt-20">
    修改数据存储路径
    <a href="#修改数据存储路径" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3>
<p>查找<code>dataDir</code>,修改如下</p>
<pre style="background-color:#272822;">
<span style="color:#75715e;"># the directory where the snapshot is stored.
</span><span style="color:#75715e;"># do not use /tmp for storage, /tmp here is just
</span><span style="color:#75715e;"># example sakes.
</span><span style="color:#f8f8f2;">dataDir</span><span style="color:#f92672;">=</span><span style="color:#e6db74;">/opt/zookeeper-3.4.10/snapshot
</span><span style="color:#f8f8f2;">
</span></pre>
<h3 id="启动/停止/重启" class="toc-item group scroll-mt-20">
    启动/停止/重启
    <a href="#启动/停止/重启" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#f8f8f2;">zkServer.sh start
</span><span style="color:#f8f8f2;">zkServer.sh stop
</span><span style="color:#f8f8f2;">zkServer.sh restart
</span></pre>
<h3 id="客户端连接" class="toc-item group scroll-mt-20">
    客户端连接
    <a href="#客户端连接" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#75715e;"># 连接zk服务端，如果是远程连接，请换成远程服务器ip
</span><span style="color:#f8f8f2;">zkCli.sh</span><span style="font-style:italic;color:#fd971f;"> -server</span><span style="color:#f8f8f2;"> 127.0.0.1:2181
</span><span style="color:#75715e;"># 输出如下
</span><span style="color:#f8f8f2;">Connecting to 127.0.0.1:2181
</span><span style="color:#f8f8f2;">2018-03-29 15:45:11,977 </span><span style="color:#f92672;">[</span><span style="color:#f8f8f2;">myid:</span><span style="color:#f92672;">]</span><span style="color:#f8f8f2;"> - INFO  </span><span style="color:#f92672;">[</span><span style="color:#f8f8f2;">main:Environment@100</span><span style="color:#f92672;">]</span><span style="color:#f8f8f2;"> - Client environment:zookeeper.version=3.4.10-39d3a4f269333c922ed3db283be479f9deacaa0f, built on 03/23/2017 10:13 GMT
</span><span style="color:#f8f8f2;">2018-03-29 15:45:11,980 </span><span style="color:#f92672;">[</span><span style="color:#f8f8f2;">myid:</span><span style="color:#f92672;">]</span><span style="color:#f8f8f2;"> - INFO  </span><span style="color:#f92672;">[</span><span style="color:#f8f8f2;">main:Environment@100</span><span style="color:#f92672;">]</span><span style="color:#f8f8f2;"> - Client environment:host.name=localhost
</span><span style="color:#f8f8f2;">...
</span><span style="color:#f8f8f2;">...
</span><span style="color:#f8f8f2;">[zk: 127.0.0.1:2181(CONNECTED) 0]
</span><span style="color:#f8f8f2;">
</span><span style="color:#75715e;"># 查看根节点
</span><span style="color:#f8f8f2;">[zk: 127.0.0.1:2181(CONNECTED) 1] ls /
</span><span style="color:#f8f8f2;">[dealer, dubbo, zookeeper]
</span><span style="color:#f8f8f2;">
</span><span style="color:#75715e;"># 查看根节点信息
</span><span style="color:#f8f8f2;">[zk: 127.0.0.1:2181(CONNECTED) 4] ls2 /
</span><span style="color:#f8f8f2;">[dealer, dubbo, zookeeper]
</span><span style="color:#f8f8f2;">cZxid = 0x0
</span><span style="color:#f8f8f2;">ctime = Thu Jan 01 08:00:00 CST 1970
</span><span style="color:#f8f8f2;">mZxid = 0x0
</span><span style="color:#f8f8f2;">mtime = Thu Jan 01 08:00:00 CST 1970
</span><span style="color:#f8f8f2;">pZxid = 0x2d
</span><span style="color:#f8f8f2;">cversion = 1
</span><span style="color:#f8f8f2;">dataVersion = 0
</span><span style="color:#f8f8f2;">aclVersion = 0
</span><span style="color:#f8f8f2;">ephemeralOwner = 0x0
</span><span style="color:#f8f8f2;">dataLength = 0
</span><span style="color:#f8f8f2;">numChildren = 3
</span><span style="color:#f8f8f2;">
</span><span style="color:#75715e;"># 退出
</span><span style="color:#f8f8f2;">[zk: 127.0.0.1:2181(CONNECTED) 5] quit
</span></pre>
<h2 id="防火墙iptables修改" class="toc-item group scroll-mt-20">
    防火墙iptables修改
    <a href="#防火墙iptables修改" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h2>
<p>开启防火墙后，有些软件的端口是无法访问，需要自己手动添加端口控制</p>
<h3 id="配置文件路径" class="toc-item group scroll-mt-20">
    配置文件路径
    <a href="#配置文件路径" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3>
<p><code>/etc/sysconfig/iptables</code></p>
<h3 id="添加常用端口控制" class="toc-item group scroll-mt-20">
    添加常用端口控制
    <a href="#添加常用端口控制" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#f8f8f2;">vi /etc/sysconfig/iptables
</span></pre>
<p>比如要开放6379,2181端口, 修改如下</p>
<pre style="background-color:#272822;">
<span style="color:#75715e;"># Firewall configuration written by system-config-firewall
</span><span style="color:#75715e;"># Manual customization of this file is not recommended.
</span><span style="color:#f8f8f2;">*filter
</span><span style="color:#f8f8f2;">:INPUT ACCEPT </span><span style="color:#f92672;">[</span><span style="color:#f8f8f2;">0:0</span><span style="color:#f92672;">]
</span><span style="color:#f8f8f2;">:FORWARD ACCEPT </span><span style="color:#f92672;">[</span><span style="color:#f8f8f2;">0:0</span><span style="color:#f92672;">]
</span><span style="color:#f8f8f2;">:OUTPUT ACCEPT </span><span style="color:#f92672;">[</span><span style="color:#f8f8f2;">0:0</span><span style="color:#f92672;">]
</span><span style="color:#f8f8f2;">-A INPUT</span><span style="font-style:italic;color:#fd971f;"> -p</span><span style="color:#f8f8f2;"> tcp</span><span style="font-style:italic;color:#fd971f;"> -m</span><span style="color:#f8f8f2;"> tcp</span><span style="font-style:italic;color:#fd971f;"> --dport</span><span style="color:#f8f8f2;"> 6379</span><span style="font-style:italic;color:#fd971f;"> -j</span><span style="color:#f8f8f2;"> ACCEPT </span><span style="color:#75715e;"># 这是我添加的
</span><span style="color:#f8f8f2;">-A INPUT</span><span style="font-style:italic;color:#fd971f;"> -p</span><span style="color:#f8f8f2;"> tcp</span><span style="font-style:italic;color:#fd971f;"> -m</span><span style="color:#f8f8f2;"> tcp</span><span style="font-style:italic;color:#fd971f;"> --dport</span><span style="color:#f8f8f2;"> 2181</span><span style="font-style:italic;color:#fd971f;"> -j</span><span style="color:#f8f8f2;"> ACCEPT </span><span style="color:#75715e;"># 这是我添加的
</span><span style="color:#f8f8f2;">-A INPUT</span><span style="font-style:italic;color:#fd971f;"> -m</span><span style="color:#f8f8f2;"> state</span><span style="font-style:italic;color:#fd971f;"> --state</span><span style="color:#f8f8f2;"> ESTABLISHED,RELATED</span><span style="font-style:italic;color:#fd971f;"> -j</span><span style="color:#f8f8f2;"> ACCEPT
</span><span style="color:#f8f8f2;">-A INPUT</span><span style="font-style:italic;color:#fd971f;"> -p</span><span style="color:#f8f8f2;"> icmp</span><span style="font-style:italic;color:#fd971f;"> -j</span><span style="color:#f8f8f2;"> ACCEPT
</span><span style="color:#f8f8f2;">-A INPUT</span><span style="font-style:italic;color:#fd971f;"> -i</span><span style="color:#f8f8f2;"> lo</span><span style="font-style:italic;color:#fd971f;"> -j</span><span style="color:#f8f8f2;"> ACCEPT
</span><span style="color:#f8f8f2;">-A INPUT</span><span style="font-style:italic;color:#fd971f;"> -m</span><span style="color:#f8f8f2;"> state</span><span style="font-style:italic;color:#fd971f;"> --state</span><span style="color:#f8f8f2;"> NEW</span><span style="font-style:italic;color:#fd971f;"> -m</span><span style="color:#f8f8f2;"> tcp</span><span style="font-style:italic;color:#fd971f;"> -p</span><span style="color:#f8f8f2;"> tcp</span><span style="font-style:italic;color:#fd971f;"> -s</span><span style="color:#f8f8f2;"> 10.0.0.0/8</span><span style="font-style:italic;color:#fd971f;"> --dport</span><span style="color:#f8f8f2;"> 22</span><span style="font-style:italic;color:#fd971f;"> -j</span><span style="color:#f8f8f2;"> ACCEPT
</span><span style="color:#f8f8f2;">-A INPUT</span><span style="font-style:italic;color:#fd971f;"> -s</span><span style="color:#f8f8f2;"> 10.10.32.0/24</span><span style="font-style:italic;color:#fd971f;"> -j</span><span style="color:#f8f8f2;"> ACCEPT
</span><span style="color:#f8f8f2;">-A INPUT</span><span style="font-style:italic;color:#fd971f;"> -s</span><span style="color:#f8f8f2;"> 10.10.21.0/24</span><span style="font-style:italic;color:#fd971f;"> -j</span><span style="color:#f8f8f2;"> ACCEPT
</span><span style="color:#f8f8f2;">-A INPUT</span><span style="font-style:italic;color:#fd971f;"> -j</span><span style="color:#f8f8f2;"> REJECT</span><span style="font-style:italic;color:#fd971f;"> --reject-with</span><span style="color:#f8f8f2;"> icmp-host-prohibited
</span><span style="color:#f8f8f2;">-A FORWARD</span><span style="font-style:italic;color:#fd971f;"> -j</span><span style="color:#f8f8f2;"> REJECT</span><span style="font-style:italic;color:#fd971f;"> --reject-with</span><span style="color:#f8f8f2;"> icmp-host-prohibited
</span><span style="color:#f8f8f2;">COMMIT
</span></pre>
<p>重启防火墙就可以生效</p>
<pre style="background-color:#272822;">
<span style="color:#f8f8f2;">service iptables restart
</span></pre>
<h3 id="常用命令" class="toc-item group scroll-mt-20">
    常用命令
    <a href="#常用命令" class="ml-2 inline-block opacity-0 border-0 group-hover:opacity-100"
        aria-label="Anchor">
        <div
            class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round">
                </path>
            </svg>
        </div>
    </a>
</h3><pre style="background-color:#272822;">
<span style="color:#75715e;">#启用
</span><span style="color:#f8f8f2;">service iptables start
</span><span style="color:#75715e;">#停止
</span><span style="color:#f8f8f2;">service iptables stop
</span><span style="color:#75715e;">#重启
</span><span style="color:#f8f8f2;">service iptables restart
</span></pre>
<p>查看状态</p>
<pre style="background-color:#272822;">
<span style="color:#f8f8f2;">service iptables status
</span><span style="color:#75715e;"># 输出如下
</span><span style="color:#f8f8f2;">Table: filter
</span><span style="color:#f8f8f2;">Chain INPUT (policy ACCEPT)
</span><span style="color:#f8f8f2;">num  target     prot opt source               destination
</span><span style="color:#f8f8f2;">1    ACCEPT     tcp</span><span style="color:#f92672;">  --</span><span style="color:#f8f8f2;">  0.0.0.0/0            0.0.0.0/0           tcp dpt:6379
</span><span style="color:#f8f8f2;">2    ACCEPT     tcp</span><span style="color:#f92672;">  --</span><span style="color:#f8f8f2;">  0.0.0.0/0            0.0.0.0/0           tcp dpt:2181
</span><span style="color:#f8f8f2;">3    ACCEPT     all</span><span style="color:#f92672;">  --</span><span style="color:#f8f8f2;">  0.0.0.0/0            0.0.0.0/0           state RELATED,ESTABLISHED
</span><span style="color:#f8f8f2;">4    ACCEPT     icmp</span><span style="color:#f92672;"> --</span><span style="color:#f8f8f2;">  0.0.0.0/0            0.0.0.0/0
</span><span style="color:#f8f8f2;">5    ACCEPT     all</span><span style="color:#f92672;">  --</span><span style="color:#f8f8f2;">  0.0.0.0/0            0.0.0.0/0
</span><span style="color:#f8f8f2;">6    ACCEPT     tcp</span><span style="color:#f92672;">  --</span><span style="color:#f8f8f2;">  10.0.0.0/8           0.0.0.0/0           state NEW tcp dpt:22
</span><span style="color:#f8f8f2;">7    ACCEPT     all</span><span style="color:#f92672;">  --</span><span style="color:#f8f8f2;">  10.10.32.0/24        0.0.0.0/0
</span><span style="color:#f8f8f2;">8    ACCEPT     all</span><span style="color:#f92672;">  --</span><span style="color:#f8f8f2;">  10.10.21.0/24        0.0.0.0/0
</span><span style="color:#f8f8f2;">9    REJECT     all</span><span style="color:#f92672;">  --</span><span style="color:#f8f8f2;">  0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited
</span></pre>

        </article>
        <div class="my-4 w-full border-dashed border-t border-slate-300"></div>
        <div class="zine-navigate flex flex-col md:flex-row md:justify-between">
            <a class="inline my-1 py-2 px-4 font-bold text-slate-700 hover:underline" href="/knowledge/linux/logrotate_usage">
                Previous:
                logrotate 日志轮转配置文档
            </a>
            <a class="inline my-1 py-2 px-4 font-bold text-slate-700 hover:underline" href="/knowledge/linux/linux_awk_usage">
                Next:
                awk 命令
            </a>
            </div>
        </div>
</div>
<div
    class="inline-link-card absolute hidden border rounded bg-white shadow-xl mx-2 w-96 transition ease-in-out sm:hover:scale-105 duration-500">
    <a class="inline-link-url">
        <div class="">
            <img class="inline-link-image w-full h-52 object-cover rounded-t">
            <div class="inline-link-title font-bold p-4 line-clamp-2"></div>
        </div>
    </a>
</div>
</main>
    <footer class="relative">
        <div class="bg-black text-white text-center p-16">
            <div>
                <a class="hover:underline" href="https://github.com/zineland/zine">Zine</a>
                - a simple and opinionated tool to build your own magazine.
            </div>
        </div>
        <a href="https://github.com/zineland"
            class="absolute z-20 bottom-0 w-full text-center font-bold md:text-slate-100 md:opacity-10 md:hover:opacity-50 md:bg-transparent bg-primary p-2 text-main">
            Proudly powered by Zine.
        </a>
    </footer>
</body>
<script src="/knowledge/static/medium-zoom.min.js"></script>
<script src="/knowledge/static/zine.js"></script>
</html>