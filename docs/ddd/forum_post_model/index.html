<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#2563eb">
    <meta name="zine-version" content="0.15.0"/>
    <title>领域模型实例分析之-论坛发帖</title>
<meta name="description" content="针对 http://www.cnblogs.com/daoqidelv/p/7533067.html 的讨论
来自 Enode QQ 群:



上海-1976  08:26:08
他是把发帖行为放在了用户实体里
上海-1976  08:26:14
为何
杭州-汤雪华  08:27:34
你觉得这里不妥是吗？
杭州-汤雪华  08:31:27
他这样做你觉得哪里不妥
上海-1976  08:31:">
<meta property="og:type" content="website">
<meta property="og:title" content="领域模型实例分析之-论坛发帖">
<meta property="og:description" content="针对 http://www.cnblogs.com/daoqidelv/p/7533067.html 的讨论
来自 Enode QQ 群:



上海-1976  08:26:08
他是把发帖行为放在了用户实体里
上海-1976  08:26:14
为何
杭州-汤雪华  08:27:34
你觉得这里不妥是吗？
杭州-汤雪华  08:31:27
他这样做你觉得哪里不妥
上海-1976  08:31:">
<meta name="twitter:title" content="领域模型实例分析之-论坛发帖">
<meta name="twitter:description" content="针对 http://www.cnblogs.com/daoqidelv/p/7533067.html 的讨论
来自 Enode QQ 群:



上海-1976  08:26:08
他是把发帖行为放在了用户实体里
上海-1976  08:26:14
为何
杭州-汤雪华  08:27:34
你觉得这里不妥是吗？
杭州-汤雪华  08:31:27
他这样做你觉得哪里不妥
上海-1976  08:31:">
<meta property="og:url" content="/knowledge/knowledge/ddd/forum_post_model">
<meta property="twitter:url" content="/knowledge/knowledge/ddd/forum_post_model">
<meta name="twitter:card" content="summary_large_image">
<meta property="og:image" content="/knowledge/knowledge/static/zine-placeholder.svg">
<meta name="twitter:image" content="/knowledge/knowledge/static/zine-placeholder.svg">
<link rel="canonical" href="/knowledge/ddd/forum_post_model">
<link rel="icon" type="image/png" href="/favicon.ico">
    <link rel="stylesheet" href="/knowledge/static/zine.css">
    <link rel="alternate" type="application/atom+xml" title="tcptty RSS" href="/feed.xml">
    <style>
    :root {
        --primary-color: #2563eb;
        --main-color: #ffffff;
        --link-color: #2563eb;
        --secondary-color: #eff3f7;
    }
    </style>
</head>

<body class="h-full bg-secondary">
    <div class="zine-header bg-primary text-main font-bold text-center z-0"
        style="background-image: url('/knowledge/static/img/bg.jpg')">
    <header class="p-8 md:p-10">
            <div class="zine-brand text-4xl lg:text-5xl">
                <a href="/knowledge/">tcptty</a>
            </div>
            <ul class="zine-menu">
                <li class="inline-block mt-6 mx-5 text-base hover:underline">
                    <a href="/knowledge/about">About</a>
                </li>
                <li class="inline-block mt-6 mx-5 text-base hover:underline">
                    <a href="/knowledge/">Blog</a>
                </li>
                </ul>
        </header>
        <div class="zine-space w-full h-32 md:h-36 lg:h-44 xl:h-48 2xl:h-56"></div>
    </div>
    <main
        class="pb-10 -translate-y-32 lg:-translate-y-36 xl:-translate-y-44 2xl:-translate-y-56 mx-auto sm:max-w-scree-md md:max-w-screen-lg">
        <div class="px-4 pb-10 md:px-8 md:pb-14 mx-4 my-6 bg-white shadow-xl shadow-slate-700/10 ring-1 ring-gray-900/5">
    <div
        class="sticky z-10 py-4 top-32 lg:top-36 xl:top-44 2xl:top-56 bg-white border-dashed border-b border-slate-300">
        <div class="ml-1 md:ml-2 flex justify-between items-center">
            <div class="zine-breadcrumb">
                <a class="zine-diamond before:block before:absolute before:-inset-1 before:-skew-x-6 before:bg-primary relative inline-block transition sm:hover:scale-110 duration-500" href="/knowledge/ddd">
                    <div class="relative text-main px-4">领域驱动设计</div>
                </a>
                <span class="ml-2 text-gray-700">/ No. ⁨1⁩</span>
            </div>
            <div>
                <div class="flex items-center">
                    </div>
                </div>
        </div>
    </div>
    <div class="pt-10">
        <div class="prose mx-auto">
            <div class="zine-article-title text-2xl md:text-4xl font-extrabold leading-tight mb-8 text-center">
                领域模型实例分析之-论坛发帖
            </div>
            <div class="flex items-center justify-between text-gray-500">
                <span>2017-12-26</span>
                <div class="flex items-center">
    <span></span>
    </div>

            </div>
            </div>
        <article class="prose mx-auto my-12">
            <p>针对 http://www.cnblogs.com/daoqidelv/p/7533067.html 的讨论</p>
<p><img src="/knowledge/static/img/post_model.png" alt="post_mode" title="" loading="lazy"></p>
<p>来自 Enode QQ 群:</p>
<pre style="background-color:#272822;">
<span style="color:#f8f8f2;">上海-1976  08:26:08
</span><span style="color:#f8f8f2;">他是把发帖行为放在了用户实体里
</span><span style="color:#f8f8f2;">上海-1976  08:26:14
</span><span style="color:#f8f8f2;">为何
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:27:34
</span><span style="color:#f8f8f2;">你觉得这里不妥是吗？
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:31:27
</span><span style="color:#f8f8f2;">他这样做你觉得哪里不妥
</span><span style="color:#f8f8f2;">上海-1976  08:31:39
</span><span style="color:#f8f8f2;">应用层直接可以调用
</span><span style="color:#f8f8f2;">上海-1976  08:32:06
</span><span style="color:#f8f8f2;">不用写业务逻辑相关的
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:33:08
</span><span style="color:#f8f8f2;">那建模是面向用例的吗
</span><span style="color:#f8f8f2;">上海-1976  08:33:19
</span><span style="color:#f8f8f2;">不是
</span><span style="color:#f8f8f2;">上海-1976  08:34:07
</span><span style="color:#f8f8f2;">但是也要有业务入口
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:34:08
</span><span style="color:#f8f8f2;">用例的作用是什么
</span><span style="color:#f8f8f2;">上海-1976  08:34:46
</span><span style="color:#f8f8f2;">用户角度使用系统
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:34:52
</span><span style="color:#f8f8f2;">恩
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:35:58
</span><span style="color:#f8f8f2;">如果像他这个思路，是不是还会有replyAuthor，topicAuthor之类的。表示回复作者，主题作者
</span><span style="color:#f8f8f2;">上海-1976  08:36:01
</span><span style="color:#f8f8f2;">判断帖子长度不应该在用户实体里
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:36:36
</span><span style="color:#f8f8f2;">恩，他这条业务规则也完全可以在帖子构造函数里
</span><span style="color:#f8f8f2;">济南-肖坤  08:38:37
</span><span style="color:#f8f8f2;">Post的业务规则应该在Post里面吧
</span><span style="color:#f8f8f2;">济南-肖坤  08:39:19
</span><span style="color:#f8f8f2;">他这样分析，作者确实就太多了
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:39:31
</span><span style="color:#f8f8f2;">根本上他犯了一个错误，就是把人和系统的交互也设计进领域模型里了。这样看起来很符合主谓宾结构，实际上让模型搞的更复杂了
</span><span style="color:#f8f8f2;">
</span><span style="color:#f8f8f2;">成都-句幽  08:40:29
</span><span style="color:#f8f8f2;">那 发帖 应该抽象个领域服务出来负责 帖子和作者的交互吗？
</span><span style="color:#f8f8f2;">上海 - Ivan  08:41:35
</span><span style="color:#f8f8f2;">其实作者作为帖子的创建工厂是可以的，但名字不应该用posting，用createpost就好很多了
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:42:36
</span><span style="color:#f8f8f2;">如果发帖时的业务规则帖子自己就能搞定，那不需要领域服务，如果还要支持关键字过滤，那需要引入领域服务，CreatePostService的领域服务
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:43:19
</span><span style="color:#f8f8f2;">@上海 - Ivan 对，创建帖子可以，但是posting就不行
</span><span style="color:#f8f8f2;">成都-句幽  08:43:37
</span><span style="color:#f8f8f2;">嗯
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:44:57
</span><span style="color:#f8f8f2;">不对，他是PostAuthor去posting的，所以也没问题。主要问题是不应该有PostAuthor这个东西
</span><span style="color:#f8f8f2;">上海 - Ivan  08:46:09
</span><span style="color:#f8f8f2;">他还是想成了要模拟人去发帖，改成postservice就好了
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:46:11
</span><span style="color:#f8f8f2;">人做什么，他一直是这个思维
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:47:10
</span><span style="color:#f8f8f2;">如果哪一天我的帖子不是登录用户发的，而是API调用过来的，那也是人吗
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:48:27
</span><span style="color:#f8f8f2;">他没有意识到，帖子作者的主从关系。帖子是主体，帖子有一个作者。作者是帖子我们所关心的一个信息而已。
</span><span style="color:#f8f8f2;">上海 - Ivan  08:50:09
</span><span style="color:#f8f8f2;">以人为中心设计系统，不利于职责归属划分
</span><span style="color:#f8f8f2;">上海 - Ivan  08:50:28
</span><span style="color:#f8f8f2;">应该尽量避免
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:50:36
</span><span style="color:#f8f8f2;">如果哪天，系统可以匿名发表帖子了，我不知道他要怎样设计[表情]
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:51:29
</span><span style="color:#f8f8f2;">按照他这样的思路，就没法搞了
</span><span style="color:#f8f8f2;">上海 - Ivan  08:52:21
</span><span style="color:#f8f8f2;">我主要考虑的是职责划分问题
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:54:11
</span><span style="color:#f8f8f2;">人使用系统，系统为人提供发帖的应用服务，发帖应用服务里创建帖子，帖子负责保证业务规则。
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:54:34
</span><span style="color:#f8f8f2;">作者是帖子的一个属性
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:56:32
</span><span style="color:#f8f8f2;">系统是一个边界，用来和人对应，人和系统交互
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:56:53
</span><span style="color:#f8f8f2;">系统内部使用领域模型完成用户需求
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:57:43
</span><span style="color:#f8f8f2;">领域模型容纳用户需求，抓住领域本质。
</span><span style="color:#f8f8f2;">杭州-汤雪华  08:58:36
</span><span style="color:#f8f8f2;">把杯子倒空才能装满水，这个我以前就讲过的
</span><span style="color:#f8f8f2;">杭州-汤雪华  09:00:58
</span><span style="color:#f8f8f2;">我们这些讨论如果到博客园和他讨论，应该会给他带来很多思考和冲击
</span><span style="color:#f8f8f2;">杭州-汤雪华  09:01:44
</span><span style="color:#f8f8f2;">当时我和蟋蟀就是这样讨论的，当时蟋蟀和他的思维很像
</span><span style="color:#f8f8f2;">
</span><span style="color:#f8f8f2;">上海 - Ivan  09:16:49
</span><span style="color:#f8f8f2;">我们主要考虑职责归属问题
</span><span style="color:#f8f8f2;">上海 - Ivan  09:17:02
</span><span style="color:#f8f8f2;">多问问自己,谁该为这个业务规则负责
</span><span style="color:#f8f8f2;">上海 - Ivan  09:17:56
</span><span style="color:#f8f8f2;">ddd大到bc的划分, 小到聚合,实体,值对象的划分,都能更好地识别出业务规则归属问题
</span><span style="color:#f8f8f2;">上海 - Ivan  09:19:45
</span><span style="color:#f8f8f2;">如果ooa,ood做得好,其实不谈ddd也罢
</span><span style="color:#f8f8f2;">杭州-汤雪华  09:20:38
</span><span style="color:#f8f8f2;">对
</span><span style="color:#f8f8f2;">杭州-汤雪华  09:21:07
</span><span style="color:#f8f8f2;">归根结底还是职责划分
</span><span style="color:#f8f8f2;">杭州-汤雪华  09:25:16
</span><span style="color:#f8f8f2;">功能划分简单
</span><span style="color:#f8f8f2;">杭州-汤雪华  09:26:23
</span><span style="color:#f8f8f2;">是个人都知道论坛有发帖回贴的功能，但是很多人不知道怎么设计模型
</span></pre>

        </article>
        <div class="my-4 w-full border-dashed border-t border-slate-300"></div>
        <div class="zine-navigate flex flex-col md:flex-row md:justify-between">
            <a class="inline my-1 py-2 px-4 font-bold text-slate-700 hover:underline" href="/knowledge/ddd/aggregate_comunication">
                Next:
                聚合间的通信
            </a>
            </div>
        </div>
</div>
<div
    class="inline-link-card absolute hidden border rounded bg-white shadow-xl mx-2 w-96 transition ease-in-out sm:hover:scale-105 duration-500">
    <a class="inline-link-url">
        <div class="">
            <img class="inline-link-image w-full h-52 object-cover rounded-t">
            <div class="inline-link-title font-bold p-4 line-clamp-2"></div>
        </div>
    </a>
</div>
</main>
    <footer class="relative">
        <div class="bg-black text-white text-center p-16">
            <div>
                <a class="hover:underline" href="https://github.com/zineland/zine">Zine</a>
                - a simple and opinionated tool to build your own magazine.
            </div>
        </div>
        <a href="https://github.com/zineland"
            class="absolute z-20 bottom-0 w-full text-center font-bold md:text-slate-100 md:opacity-10 md:hover:opacity-50 md:bg-transparent bg-primary p-2 text-main">
            Proudly powered by Zine.
        </a>
    </footer>
</body>
<script src="/knowledge/static/medium-zoom.min.js"></script>
<script src="/knowledge/static/zine.js"></script>
</html>